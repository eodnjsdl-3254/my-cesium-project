<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>V-World 3D Independent</title>
    <style>
        body, html { width: 100%; height: 100%; margin: 0; padding: 0; overflow: hidden; background-color: black; }
        #vworld-container { width: 100%; height: 100%; }
    </style>

    <script>
        (function() {
            const originalRemove = EventTarget.prototype.removeEventListener;
            EventTarget.prototype.removeEventListener = function(type, listener, options) {
                if (arguments.length < 2) return; 
                return originalRemove.call(this, type, listener, options);
            };
        })();
    </script>

    <script type="text/javascript" src="https://map.vworld.kr/js/webglMapInit.js.do?version=2.0&apiKey=37B44C3A-8C01-30CE-806E-7D89E87B8473&domain=http://localhost:5173"></script>
</head>
<body>
    <div id="vworld-container"></div>

    <script>
        function init() {
            // V-World ê°ì²´ê°€ ë¡œë“œë  ë•Œê¹Œì§€ ëŒ€ê¸°
            if (!window.vw) {
                setTimeout(init, 100);
                return;
            }

            console.log("ğŸš€ [Iframe] V-World ë§µ ì´ˆê¸°í™” ì‹œì‘");

            var mapOptions = {
                basemapType: window.vw.BasemapType.GRAPHIC,
                controlDensity: window.vw.DensityType.BASIC,
                interactionDensity: window.vw.DensityType.BASIC,
                controlsAutoArrange: true,
                homePosition: window.vw.CameraPosition,
                initPosition: new window.vw.CameraPosition(
                    new window.vw.CoordZ(126.8320, 37.6585, 800), // ê³ ì–‘ì‹œì²­
                    new window.vw.Direction(-45, 0, 0)
                )
            };

            try {
                // ì—¬ê¸°ì„œ ìƒì„±í•˜ë©´ React ê²½ë¡œ ë¬¸ì œ(Worker ì˜¤ë¥˜)ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                var vmap = new window.vw.Map("vworld-container", mapOptions);
                console.log("âœ… [Iframe] V-World ì§€ë„ ìƒì„± ì„±ê³µ");
            } catch (e) {
                console.error("âŒ [Iframe] ìƒì„± ì‹¤íŒ¨:", e);
            }
        }

        window.addEventListener('load', init);
    </script>
</body>
</html>